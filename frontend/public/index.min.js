'use strict';var Loader;
(function(k){function n(e){e=e.split("/");const a=[];for(let b=0;b<e.length;++b){const d=e[b];if(0===b||d.length&&"."!==d)".."===d?a.pop():a.push(d)}return a.join("/")}const u={"@singleware/class/exception":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});class b extends Error{}e.Exception=b}},"@singleware/class/helper":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});const b=a("./exception");(function(a){function c(a){return m.get(a)||a}
function f(a,c){for(;(a=Reflect.getPrototypeOf(a))&&a.prototype;)if(a.prototype.constructor===c.prototype.constructor)return!0;return!1}function g(a,c){do if(Reflect.getOwnPropertyDescriptor(a.prototype,c)||Reflect.getOwnPropertyDescriptor(a,c))return!0;while((a=Reflect.getPrototypeOf(a))&&a.prototype&&p.has(a.prototype.constructor));return!1}function h(a,f){const h=new Proxy(f,{get:(f,h,b)=>{let e;if(!g(a,h)){if((e=Reflect.get(f,h,c(b)))&&e instanceof Function)return function(...a){return e.apply(c(this),
a)}}else if((e=d(a,f,Reflect.get,[f,h,b]))&&q.has(e))return function(...c){return d(a,this,e,c)};return e},set:(f,h,b,e)=>g(a,h)?d(a,f,Reflect.set,[f,h,b,e]):Reflect.set(f,h,b,c(e))});m.set(h,f);return h}function d(a,f,g,b){const d=l;f=f?h(a,c(f)):f;try{return l=a,g.apply(f,b)}catch(v){throw v;}finally{l=d}}function e(a,c,f){c=function(...c){return d(a,this,f,c)};q.add(c);return c}function w(a,c,g){const h=function(...h){if(!l||l!==a&&!f(a,l)&&!f(l,a))throw new b.Exception(`Access to the protected member '${c}' has been denied.`);
return d(a,this,g,h)};q.add(h);return h}function x(a,c,f){const g=function(...g){if(l!==a)throw new b.Exception(`Access to the private member '${c}' has been denied.`);return d(a,this,f,g)};q.add(g);return g}function y(a){if(!n.has(a.prototype.constructor)){const c=Reflect.getPrototypeOf(a).prototype;if(!c)console.warn(`For security and compatibility reasons the class '${a.name}' must extends the default class Null.`);else if(!p.has(c.constructor)){class f extends c.constructor{constructor(...c){return h(a.prototype.constructor,
super(...c))}}Reflect.setPrototypeOf(a,f)}n.add(a.prototype.constructor)}return a}function z(a){if(p.has(a.prototype.constructor))throw new b.Exception("Access to the class has been denied.");p.add(a.prototype.constructor);return new Proxy(y(a),{construct:(a,f,g)=>{const b=a.prototype.constructor,e=g.prototype.constructor;a=d(b,void 0,Reflect.construct,[a,f,g]);return b!==e?h(l,c(a)):c(a)}})}function k(a,c,f,g){a=(a instanceof Function?a:a.constructor).prototype.constructor;if(p.has(a))throw new b.Exception("Access to the class has been denied.");
f.value instanceof Function?f.value=g(a,c,f.value):(f.get instanceof Function&&(f.get=g(a,c,f.get)),f.set instanceof Function&&(f.set=g(a,c,f.set)));return f}function r(a,f){const g=a.hasOwnProperty(f)?a[f]:void 0;let h;return{get:function(){const a=c(this);(h=t.get(a))||t.set(a,h={});return f in h?h[f]:h[f]=g},set:function(a){const g=c(this);(h=t.get(g))||t.set(g,h={});h[f]=a}}}const m=new WeakMap,t=new WeakMap,n=new WeakSet,q=new WeakSet,p=new WeakSet;let l;class u{}a.Null=u;a.Describe=function(){return(a)=>
z(a)};a.Public=function(){return(a,c,f)=>k(a,c,f||r(a,c),e)};a.Protected=function(){return(a,c,f)=>k(a,c,f||r(a,c),w)};a.Private=function(){return(a,c,f)=>k(a,c,f||r(a,c),x)};a.Property=function(){return(a,c,f)=>((f||(f=r(a,c))).enumerable=!0,f)};a.perform=async function(a,f,...g){if(!m.has(a))throw new b.Exception("The provided context isn't a valid context.");a=c(a);const h=Reflect.getPrototypeOf(a).constructor;return await d(h,a,f,g)};a.resolve=function(a){return c(a)}})(e.Helper||(e.Helper={}))}},
"@singleware/class/index":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});var b=a("./exception");e.Exception=b.Exception;const d=a("./helper");e.Null=d.Helper.Null;e.Describe=()=>d.Helper.Describe();e.Public=()=>d.Helper.Public();e.Protected=()=>d.Helper.Protected();e.Private=()=>d.Helper.Private();e.Property=()=>d.Helper.Property();e.perform=async(a,f,...g)=>d.Helper.perform(a,f,...g);e.resolve=(a)=>d.Helper.resolve(a)}},"@singleware/class":{pack:!0,invoke:function(e,
a){Object.assign(e,a("index"))}},"@singleware/injection/index":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});var b=a("./manager");e.Manager=b.Manager;const d=new (a("./manager").Manager);e.Describe=(a)=>d.Describe(a);e.Inject=(...a)=>d.Inject(...a);e.resolve=(a)=>d.resolve(a);e.construct=(a,...f)=>d.construct(a,...f)}},"@singleware/injection":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"@singleware/injection/manager":{pack:!1,invoke:function(e,a){var b=
this&&this.__decorate||function(a,f,g,h){var c=arguments.length,b=3>c?f:null===h?h=Object.getOwnPropertyDescriptor(f,g):h,d;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)b=Reflect.decorate(a,f,g,h);else for(var e=a.length-1;0<=e;e--)if(d=a[e])b=(3>c?d(b):3<c?d(f,g,b):d(f,g))||b;return 3<c&&b&&Object.defineProperty(f,g,b),b};Object.defineProperty(e,"__esModule",{value:!0});a=a("@singleware/class");let d=class extends a.Null{constructor(){super(...arguments);this.instances=new WeakMap;
this.dependencies=new WeakMap}Describe(a){return(c)=>{if(this.dependencies.has(c.prototype))throw new TypeError(`Dependency type ${c.name} is already described.`);this.dependencies.set(c.prototype,a||{})}}Inject(...a){return(c)=>{const f=this.dependencies;return new Proxy(c,{construct:(c,g,b)=>{const h={};for(const c of a){const a=f.get(c.prototype);h[a.name||c.name]=this.resolve(c)}return Reflect.construct(c,[h,g],b)}})}}resolve(a){var c=this.dependencies.get(a.prototype);if(!c)throw new TypeError(`Dependency type ${a?
a.name:void 0} does not exists.`);return c.singleton?((c=this.instances.get(a))||this.instances.set(a,c=this.construct(a)),c):this.construct(a)}construct(a,...f){return new a(...f)}};b([a.Private()],d.prototype,"instances",void 0);b([a.Private()],d.prototype,"dependencies",void 0);b([a.Public()],d.prototype,"Describe",null);b([a.Public()],d.prototype,"Inject",null);b([a.Public()],d.prototype,"resolve",null);b([a.Public()],d.prototype,"construct",null);d=b([a.Describe()],d);e.Manager=d}},"@singleware/observable/index":{pack:!1,
invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});a=a("./subject");e.Subject=a.Subject}},"@singleware/observable":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"@singleware/observable/subject":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,c,h,b){var f=arguments.length,g=3>f?c:null===b?b=Object.getOwnPropertyDescriptor(c,h):b,d;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,c,h,b);else for(var e=a.length-
1;0<=e;e--)if(d=a[e])g=(3>f?d(g):3<f?d(c,h,g):d(c,h))||g;return 3<f&&g&&Object.defineProperty(c,h,g),g};Object.defineProperty(e,"__esModule",{value:!0});var d;"use strict";a=a("@singleware/class");let c=d=class extends a.Null{constructor(){super(...arguments);this.observers=[]}get length(){return this.observers.length}subscribe(a){if(a instanceof d)for(const c of a.observers)this.observers.push(c);else this.observers.push(a);return this}contains(a){return-1!==this.observers.indexOf(a)}unsubscribe(a){a=
this.observers.indexOf(a);return-1<a?(this.observers.splice(a,1),!0):!1}notifyAllSync(a){for(const c of this.observers)c(a);return this}async notifyAll(a){for(const c of this.observers)await c(a);return this}*notifyStep(a){for(const c of this.observers)yield c(a);return this}};b([a.Protected()],c.prototype,"observers",void 0);b([a.Public()],c.prototype,"length",null);b([a.Public()],c.prototype,"subscribe",null);b([a.Public()],c.prototype,"contains",null);b([a.Public()],c.prototype,"unsubscribe",null);
b([a.Public()],c.prototype,"notifyAllSync",null);b([a.Public()],c.prototype,"notifyAll",null);b([a.Public()],c.prototype,"notifyStep",null);c=d=b([a.Describe()],c);e.Subject=c}},"@singleware/pipeline/index":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});a=a("./subject");e.Subject=a.Subject}},"@singleware/pipeline":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"@singleware/pipeline/subject":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,
f,g,h){var c=arguments.length,b=3>c?f:null===h?h=Object.getOwnPropertyDescriptor(f,g):h,d;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)b=Reflect.decorate(a,f,g,h);else for(var e=a.length-1;0<=e;e--)if(d=a[e])b=(3>c?d(b):3<c?d(f,g,b):d(f,g))||b;return 3<c&&b&&Object.defineProperty(f,g,b),b};Object.defineProperty(e,"__esModule",{value:!0});const d=a("@singleware/class");a=a("@singleware/observable");a=class extends a.Subject{notifyFirstSync(a){const c=this.observers.shift();c&&
c(a);return this}async notifyFirst(a){const c=this.observers.shift();c&&await c(a);return this}notifyLastSync(a){const c=this.observers.pop();c&&c(a);return this}async notifyLast(a){const c=this.observers.pop();c&&await c(a);return this}};b([d.Public()],a.prototype,"notifyFirstSync",null);b([d.Public()],a.prototype,"notifyFirst",null);b([d.Public()],a.prototype,"notifyLastSync",null);b([d.Public()],a.prototype,"notifyLast",null);a=b([d.Describe()],a);e.Subject=a}},"@singleware/routing/index":{pack:!1,
invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});var b=a("./match");e.Match=b.Match;a=a("./router");e.Router=a.Router}},"@singleware/routing":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"@singleware/routing/match":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,f,g,h){var c=arguments.length,b=3>c?f:null===h?h=Object.getOwnPropertyDescriptor(f,g):h,d;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)b=Reflect.decorate(a,f,
g,h);else for(var e=a.length-1;0<=e;e--)if(d=a[e])b=(3>c?d(b):3<c?d(f,g,b):d(f,g))||b;return 3<c&&b&&Object.defineProperty(f,g,b),b};Object.defineProperty(e,"__esModule",{value:!0});a=a("@singleware/class");let d=class extends a.Null{constructor(a,f,g,b,d){super();this.matchPath=a;this.matchEvents=d;this.matchVariables=g;this.currentVariables=g.find(()=>!0);this.remainingPath=f;this.extraDetails=b}get length(){return this.matchEvents.length}get path(){return this.matchPath}get remaining(){return this.remainingPath}get variables(){return this.currentVariables||
{}}get detail(){return this.extraDetails}get exact(){return 0===this.remainingPath.length}nextSync(){this.currentVariables=this.matchVariables.shift();this.matchEvents.notifyFirstSync(this);return this}async next(){this.currentVariables=this.matchVariables.shift();await this.matchEvents.notifyFirst(this);return this}};b([a.Private()],d.prototype,"matchPath",void 0);b([a.Private()],d.prototype,"matchEvents",void 0);b([a.Private()],d.prototype,"matchVariables",void 0);b([a.Private()],d.prototype,"currentVariables",
void 0);b([a.Private()],d.prototype,"remainingPath",void 0);b([a.Private()],d.prototype,"extraDetails",void 0);b([a.Public()],d.prototype,"length",null);b([a.Public()],d.prototype,"path",null);b([a.Public()],d.prototype,"remaining",null);b([a.Public()],d.prototype,"variables",null);b([a.Public()],d.prototype,"detail",null);b([a.Public()],d.prototype,"exact",null);b([a.Public()],d.prototype,"nextSync",null);b([a.Public()],d.prototype,"next",null);d=b([a.Describe()],d);e.Match=d}},"@singleware/routing/router":{pack:!1,
invoke:function(e,a){var b=this&&this.__decorate||function(a,c,f,b){var g=arguments.length,h=3>g?c:null===b?b=Object.getOwnPropertyDescriptor(c,f):b,d;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,c,f,b);else for(var e=a.length-1;0<=e;e--)if(d=a[e])h=(3>g?d(h):3<g?d(c,f,h):d(c,f))||h;return 3<g&&h&&Object.defineProperty(c,f,h),h};Object.defineProperty(e,"__esModule",{value:!0});const d=a("@singleware/class"),c=a("@singleware/pipeline"),f=a("./match");a=class extends d.Null{constructor(a){super();
this.entries={};this.counter=0;this.settings=a}splitPath(a){a=a.split(this.settings.separator);const c=[this.settings.separator];for(let f=0;f<a.length;++f){const b=a[f];b.length&&(c.push(b),f+1<a.length&&c.push(this.settings.separator))}return c}createEntry(a,c){return{pattern:a,variable:c,entries:{},partial:[],exact:[]}}insertEntries(a,c){let f=this.entries,b;for(let g of a){let h,d;if(a=this.settings.variable.exec(g)){if(!(d=c[h=a[1]]))throw new TypeError(`Constraint rules for the variable "${h}" was not found.`);
g=d.toString()}(b=f[g])||(f[g]=b=this.createEntry(d,h),++this.counter);f=b.entries}return b}searchEntries(a,c){const f={directories:[],entries:[],variables:{}};for(const b in c){const g=c[b];g.pattern&&g.variable?g.pattern.exec(a)&&(f.variables[g.variable]=a,f.entries.push(g)):b===a&&f.entries.push(g)}return f}collectEntries(a){let c={directories:[],entries:[],variables:{}};var f=[this.entries];let b={};for(;a.length&&f.length;){const g=[],d=[];for(const c of f){f=this.searchEntries(a[0],c);b=Object.assign({},
f.variables,b);for(const a of f.entries)(a.partial.length||a.exact.length)&&d.push(a),g.push(a.entries)}f=g;g.length&&c.directories.push(a.shift());d.length&&(c.entries=d,c.variables=b)}return c}get length(){return this.counter}add(...a){for(const c of a){a=this.insertEntries(this.splitPath(c.path),c.constraint||{});const f={environment:c.environment,callback:c.onMatch};c.exact?a.exact.push(f):a.partial.push(f)}return this}match(a,b){var d=this.splitPath(a);a=this.collectEntries(d);const g=new c.Subject,
h=[];d=d.join("");const e=a.directories.join("");for(const c of a.entries){if(0===d.length)for(const f of c.exact)g.subscribe(f.callback),h.push(Object.assign({},a.variables,f.environment));for(const f of c.partial)g.subscribe(f.callback),h.push(Object.assign({},a.variables,f.environment))}return new f.Match(e,d,h,b,g)}clear(){this.entries={};this.counter=0;return this}};b([d.Private()],a.prototype,"entries",void 0);b([d.Private()],a.prototype,"counter",void 0);b([d.Private()],a.prototype,"settings",
void 0);b([d.Private()],a.prototype,"splitPath",null);b([d.Private()],a.prototype,"createEntry",null);b([d.Private()],a.prototype,"insertEntries",null);b([d.Private()],a.prototype,"searchEntries",null);b([d.Private()],a.prototype,"collectEntries",null);b([d.Public()],a.prototype,"length",null);b([d.Public()],a.prototype,"add",null);b([d.Public()],a.prototype,"match",null);b([d.Public()],a.prototype,"clear",null);a=b([d.Describe()],a);e.Router=a}},"@singleware/application/index":{pack:!1,invoke:function(e,
a){Object.defineProperty(e,"__esModule",{value:!0});a=a("./main");e.Main=a.Main;e.Filter=(a)=>e.Main.Filter(a);e.Processor=(a)=>e.Main.Processor(a)}},"@singleware/application":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"@singleware/application/main":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,c,f,b){var d=arguments.length,g=3>d?c:null===b?b=Object.getOwnPropertyDescriptor(c,f):b,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,
c,f,b);else for(var e=a.length-1;0<=e;e--)if(h=a[e])g=(3>d?h(g):3<d?h(c,f,g):h(c,f))||g;return 3<d&&g&&Object.defineProperty(c,f,g),g};Object.defineProperty(e,"__esModule",{value:!0});var d;"use strict";const c=a("@singleware/class"),f=a("@singleware/routing"),g=a("@singleware/injection");a=d=class extends c.Null{constructor(a){super();this.dependencies=new g.Manager;this.services=[];this.loggers=[];this.started=!1;this.receiveHandlerListener=this.receiveHandler.bind(this);this.sendHandlerListener=
this.sendHandler.bind(this);this.errorHandlerListener=this.errorHandler.bind(this);a={separator:a.separator,variable:a.variable};this.filters=new f.Router(a);this.processors=new f.Router(a)}async receiveHandler(a){this.protectRequest(a);this.notifyAllLoggers("receive",a);const c=this.processors.match(a.path,a),f=a.environment;for(;c.length;){const b=this.filters.match(a.path,a);a.environment=Object.assign({},c.variables,f);a.granted=0===b.length;await b.next();await c.next()}this.notifyAllLoggers("process",
a)}async sendHandler(a){this.notifyAllLoggers("send",a)}async errorHandler(a){this.notifyAllLoggers("error",a)}protectRequest(a){Object.defineProperties(a,{path:{value:a.path,writable:!1,configurable:!1},input:{value:a.input,writable:!1,configurable:!1},output:{value:a.output,writable:!1,configurable:!1}})}async filterHandler(a,c){!1!==(a.detail.granted=await c(a))&&await a.next()}async processHandler(a,c){a.detail.granted&&await c(a)}getRoute(a,c,f){return{path:a.path,exact:void 0===a.exact?c:a.exact,
constraint:a.constraint,environment:a.environment,onMatch:f.bind(this)}}addFilter(a,c,...f){this.filters.add(this.getRoute(a.action,!1,async(b)=>{const d=this.construct(c,...f);await this.filterHandler(b,d[a.method].bind(d))}))}addProcessor(a,c,...f){this.processors.add(this.getRoute(a.action,!0,async(b)=>{const d=this.construct(c,...f);await this.processHandler(b,d[a.method].bind(d))}))}notifyAllLoggers(a,c){c=Object.freeze(Object.assign({},c));for(const f of this.loggers)switch(a){case "receive":f.onReceive(c);
break;case "process":f.onProcess(c);break;case "send":f.onSend(c);break;case "error":f.onError(c);break;default:throw new TypeError(`Invalid notification type '${a}'`);}}Dependency(a){return this.dependencies.Describe(a)}Inject(...a){return this.dependencies.Inject(...a)}construct(a,...c){return this.dependencies.construct(a,...c)}addHandler(a,...c){if(this.started)throw Error("To add new handlers the application must be stopped.");const f=d.routes.get(a.prototype.constructor)||[];for(const b of f)switch(b.type){case "filter":this.addFilter(b,
a,...c);break;case "processor":this.addProcessor(b,a,...c)}return this}addService(a,...c){if(this.started)throw Error("To add new services the application must be stopped.");a=this.construct(a,...c);this.services.push(a);return a}addLogger(a,...c){if(this.started)throw Error("To add new loggers service the application must be stopped.");a=this.construct(a,...c);this.loggers.push(a);return a}start(){if(this.started)throw Error("Application is already initialized.");for(const a of this.services)a.onReceive.subscribe(this.receiveHandlerListener),
a.onSend.subscribe(this.sendHandlerListener),a.onError.subscribe(this.errorHandlerListener),a.start();this.started=!0;return this}stop(){if(!this.started)throw Error("Application is not initialized.");for(const a of this.services)a.stop(),a.onReceive.unsubscribe(this.receiveHandlerListener),a.onSend.unsubscribe(this.sendHandlerListener),a.onError.unsubscribe(this.errorHandlerListener);this.started=!1;return this}static addRoute(a,c){let f;(f=this.routes.get(a))||this.routes.set(a,f=[]);f.push(c)}static Filter(a){return(c,
f,b)=>{if(!(b&&b.value instanceof Function))throw new TypeError("Only methods are allowed for filters.");this.addRoute(c.constructor,{type:"filter",action:a,method:f})}}static Processor(a){return(c,f,b)=>{if(!(b&&b.value instanceof Function))throw new TypeError("Only methods are allowed for processors.");this.addRoute(c.constructor,{type:"processor",action:a,method:f})}}};a.routes=new WeakMap;b([c.Private()],a.prototype,"dependencies",void 0);b([c.Private()],a.prototype,"services",void 0);b([c.Private()],
a.prototype,"loggers",void 0);b([c.Private()],a.prototype,"filters",void 0);b([c.Private()],a.prototype,"processors",void 0);b([c.Private()],a.prototype,"started",void 0);b([c.Private()],a.prototype,"receiveHandlerListener",void 0);b([c.Private()],a.prototype,"sendHandlerListener",void 0);b([c.Private()],a.prototype,"errorHandlerListener",void 0);b([c.Private()],a.prototype,"receiveHandler",null);b([c.Private()],a.prototype,"sendHandler",null);b([c.Private()],a.prototype,"errorHandler",null);b([c.Private()],
a.prototype,"protectRequest",null);b([c.Protected()],a.prototype,"filterHandler",null);b([c.Protected()],a.prototype,"processHandler",null);b([c.Private()],a.prototype,"getRoute",null);b([c.Private()],a.prototype,"addFilter",null);b([c.Private()],a.prototype,"addProcessor",null);b([c.Private()],a.prototype,"notifyAllLoggers",null);b([c.Public()],a.prototype,"Dependency",null);b([c.Public()],a.prototype,"Inject",null);b([c.Public()],a.prototype,"construct",null);b([c.Public()],a.prototype,"addHandler",
null);b([c.Public()],a.prototype,"addService",null);b([c.Public()],a.prototype,"addLogger",null);b([c.Public()],a.prototype,"start",null);b([c.Public()],a.prototype,"stop",null);b([c.Private()],a,"routes",void 0);b([c.Private()],a,"addRoute",null);b([c.Public()],a,"Filter",null);b([c.Public()],a,"Processor",null);a=d=b([c.Describe()],a);e.Main=a}},"@singleware/jsx/helpers/browser":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,f,b,d){var c=arguments.length,g=3>c?f:null===d?
d=Object.getOwnPropertyDescriptor(f,b):d,e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,f,b,d);else for(var h=a.length-1;0<=h;h--)if(e=a[h])g=(3>c?e(g):3<c?e(f,b,g):e(f,b))||g;return 3<c&&g&&Object.defineProperty(f,b,g),g};Object.defineProperty(e,"__esModule",{value:!0});a=a("@singleware/class");let d=class extends a.Null{static assignProperties(a,f){for(const c in f)if(void 0!==f[c])if(c in a)a[c]=f[c];else{const b=c.toLowerCase();this.eventMap.includes(b)?
a.addEventListener(b.substr(2),f[c]):a.setAttribute(c,f[c])}}static createFromElement(a,f,...b){a=this.append(document.createElement(a),...b);f&&this.assignProperties(a,f);return a}static Describe(a){return(c)=>{window.customElements.define(a,c);return c}}static create(a,f,...b){if(a instanceof Function)return(new a(f,b)).element;if("string"===typeof a)return this.createFromElement(a,f,...b);throw new TypeError(`Unsupported element or component type "${a}"`);}static append(a,...f){for(const c of f)if(c instanceof
Node)a.appendChild(c);else if(c instanceof NodeList||c instanceof Array)this.append(a,...c);else if("string"===typeof c||"number"===typeof c)this.renderer.innerHTML=c.toString(),this.append(a,...this.renderer.childNodes);else if(c)if(f=c.element,f instanceof Node)this.append(a,f);else throw new TypeError(`Unsupported child type "${c}"`);return a}static clear(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}static childOf(a,f){for(;f.parentElement;){if(f.parentElement===a)return!0;f=f.parentElement}return!1}};
d.eventMap="onblur onchange oncontextmenu onfocus oninput oninvalid onreset onsearch onselect onsubmit onkeydown onkeypress onkeyup onclick ondblclick onmousedown onmousemove onmouseout onmouseover onmouseup onmousewheel onwheel ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop onscroll oncopy oncut onpaste onabort oncanplay oncanplaythrough oncuechange ondurationchange onemptied onended onerror onloadeddata onloadedmetadata onloadstart onpause onplay onplaying onprogress onratechange onseeked onseeking onstalled onsuspend ontimeupdate onvolumechange onwaiting ontoggle onslotchange".split(" ");
d.renderer=document.createElement("body");b([a.Private()],d,"eventMap",void 0);b([a.Private()],d,"renderer",void 0);b([a.Private()],d,"assignProperties",null);b([a.Private()],d,"createFromElement",null);b([a.Public()],d,"Describe",null);b([a.Public()],d,"create",null);b([a.Public()],d,"append",null);b([a.Public()],d,"clear",null);b([a.Public()],d,"childOf",null);d=b([a.Describe()],d);e.Helper=d}},"@singleware/jsx/helpers/index":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});
const b=a("./browser");e.Browser=b.Helper;a=a("./text");e.Text=a.Helper}},"@singleware/jsx/helpers":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"@singleware/jsx/helpers/text":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,f,b,d){var c=arguments.length,g=3>c?f:null===d?d=Object.getOwnPropertyDescriptor(f,b):d,e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,f,b,d);else for(var h=a.length-1;0<=h;h--)if(e=a[h])g=(3>c?e(g):
3<c?e(f,b,g):e(f,b))||g;return 3<c&&g&&Object.defineProperty(f,b,g),g};Object.defineProperty(e,"__esModule",{value:!0});a=a("@singleware/class");let d=class extends a.Null{static Describe(a){return(a)=>a}static create(a,f,...b){if(a instanceof Function)return(new a(f,b)).element;if("string"===typeof a)return`<${a}${this.getProperties(f)}>${this.getChildren(b)}</${a}>`;throw new TypeError(`Unsupported element or component type "${a}"`);}static append(a,...f){throw Error("Operation not supported in text mode.");
}static clear(a){throw Error("Operation not supported in text mode.");}static childOf(a,f){throw Error("Operation not supported in text mode.");}static getProperties(a){let c="";for(const f in a)void 0!==a[f]&&(c+=` ${f.toLowerCase()}="${a[f]}"`);return c}static getChildren(a){let c="";for(const f of a)if("string"===typeof f||"number"===typeof f)c+=f;else if(f instanceof Array)c+=this.getChildren(f);else if(f)if(a=f.element)c+=this.getChildren([a]);else throw new TypeError(`Unsupported child type "${f}"`);
return c}};b([a.Public()],d,"Describe",null);b([a.Public()],d,"create",null);b([a.Public()],d,"append",null);b([a.Public()],d,"clear",null);b([a.Public()],d,"childOf",null);b([a.Private()],d,"getProperties",null);b([a.Private()],d,"getChildren",null);d=b([a.Describe()],d);e.Helper=d}},"@singleware/jsx/index":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});const b=a(`./helpers/${"undefined"!==typeof window?"browser":"text"}`).Helper;e.Describe=(a)=>b.Describe(a);e.create=
(a,c,...f)=>b.create(a,c,...f);e.append=(a,...c)=>b.append(a,...c);e.clear=(a)=>b.clear(a);e.childOf=(a,c)=>b.childOf(a,c)}},"@singleware/jsx":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"@singleware/path/helper":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,f,b,d){var c=arguments.length,e=3>c?f:null===d?d=Object.getOwnPropertyDescriptor(f,b):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(a,f,b,d);else for(var h=a.length-
1;0<=h;h--)if(g=a[h])e=(3>c?g(e):3<c?g(f,b,e):g(f,b))||e;return 3<c&&e&&Object.defineProperty(f,b,e),e};Object.defineProperty(e,"__esModule",{value:!0});a=a("@singleware/class");let d=class extends a.Null{static normalize(a){a=a.split(this.separator);const c=[];for(let f=0;f<a.length;++f){const b=a[f];if(0===f||f+1===a.length||b.length&&"."!==b)".."===b?c.pop():c.push(b)}return c.join(this.separator)}static join(...a){return this.normalize(a.filter((a)=>a.length).join(this.separator))}static resolve(...a){let c=
"";for(const f of a)c=f[0]===this.separator?f:this.join(c,f);return c}static dirname(a){a=this.normalize(a);return a.substr(0,a.lastIndexOf(this.separator))}static basename(a){a=this.normalize(a);return a.substr(a.lastIndexOf(this.separator)+1)}static extname(a){a=this.basename(a);return"."===a[0]?"":a.substr(a.lastIndexOf(".")+1)}};d.separator="/";b([a.Public()],d,"separator",void 0);b([a.Public()],d,"normalize",null);b([a.Public()],d,"join",null);b([a.Public()],d,"resolve",null);b([a.Public()],
d,"dirname",null);b([a.Public()],d,"basename",null);b([a.Public()],d,"extname",null);d=b([a.Describe()],d);e.Helper=d}},"@singleware/path/index":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});const b=a("./helper");e.normalize=(a)=>b.Helper.normalize(a);e.join=(...a)=>b.Helper.join(...a);e.resolve=(...a)=>b.Helper.resolve(...a);e.dirname=(a)=>b.Helper.dirname(a);e.basename=(a)=>b.Helper.basename(a);e.extname=(a)=>b.Helper.extname(a)}},"@singleware/path":{pack:!0,invoke:function(e,
a){Object.assign(e,a("index"))}},"@singleware/frontend/index":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});var b=a("./services");e.Services=b;b=a("./main");e.Main=b.Main;const d=a("@singleware/application");e.Filter=(a)=>d.Main.Filter(a);e.Processor=(a)=>d.Main.Processor(a)}},"@singleware/frontend":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"@singleware/frontend/main":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,c,f,b){var d=
arguments.length,e=3>d?c:null===b?b=Object.getOwnPropertyDescriptor(c,f):b,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(a,c,f,b);else for(var h=a.length-1;0<=h;h--)if(g=a[h])e=(3>d?g(e):3<d?g(c,f,e):g(c,f))||e;return 3<d&&e&&Object.defineProperty(c,f,e),e};Object.defineProperty(e,"__esModule",{value:!0});const d=a("@singleware/class"),c=a("@singleware/application"),f=a("@singleware/jsx");a=class extends c.Main{constructor(a){super({separator:"/",variable:/^\{([a-z_0-9]+)\}$/});
this.settings=a}formatTitle(a){return this.settings.title?a?this.settings.title.prefix?`${this.settings.title.text}${this.settings.title.separator||" "}${a}`:`${a}${this.settings.title.separator||" "}${this.settings.title.text}`:this.settings.title.text:a}async processHandler(a,c){const b=a.detail.output;await super.processHandler(a,c);if(a.detail.granted){if(c=this.formatTitle(b.subtitle))document.title=c;f.append(f.clear(this.settings.body||document.body),b.content);history.pushState(a.variables.state,
document.title,a.detail.path)}}};b([d.Private()],a.prototype,"settings",void 0);b([d.Private()],a.prototype,"formatTitle",null);b([d.Protected()],a.prototype,"processHandler",null);a=b([d.Describe()],a);e.Main=a}},"@singleware/frontend/services/client":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,c,f,b){var d=arguments.length,e=3>d?c:null===b?b=Object.getOwnPropertyDescriptor(c,f):b,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(a,
c,f,b);else for(var h=a.length-1;0<=h;h--)if(g=a[h])e=(3>d?g(e):3<d?g(c,f,e):g(c,f))||e;return 3<d&&e&&Object.defineProperty(c,f,e),e};Object.defineProperty(e,"__esModule",{value:!0});const d=a("@singleware/class"),c=a("@singleware/observable"),f=a("@singleware/path");a=class extends d.Null{constructor(a){super();this.opened="";this.events={receive:new c.Subject,send:new c.Subject,error:new c.Subject};this.settings=a}get path(){return this.opened}get onReceive(){return this.events.receive}get onSend(){return this.events.send}get onError(){return this.events.error}start(){this.open(this.settings.path||
location.pathname)}stop(){}open(a){this.events.receive.notifyAll({path:this.opened=f.resolve(f.dirname(this.path),a),input:{},output:{},environment:{}})}};b([d.Private()],a.prototype,"opened",void 0);b([d.Private()],a.prototype,"settings",void 0);b([d.Private()],a.prototype,"events",void 0);b([d.Public()],a.prototype,"path",null);b([d.Public()],a.prototype,"onReceive",null);b([d.Public()],a.prototype,"onSend",null);b([d.Public()],a.prototype,"onError",null);b([d.Public()],a.prototype,"start",null);
b([d.Public()],a.prototype,"stop",null);b([d.Public()],a.prototype,"open",null);a=b([d.Describe()],a);e.Client=a}},"@singleware/frontend/services/index":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});a=a("./client");e.Client=a.Client}},"@singleware/frontend/services":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"@singleware/ui-control/component":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,f,b,d){var c=arguments.length,e=3>c?
f:null===d?d=Object.getOwnPropertyDescriptor(f,b):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(a,f,b,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])e=(3>c?g(e):3<c?g(f,b,e):g(f,b))||e;return 3<c&&e&&Object.defineProperty(f,b,e),e};Object.defineProperty(e,"__esModule",{value:!0});a=a("@singleware/class");let d=class extends a.Null{constructor(a,b){super();this.properties=Object.freeze(a||{});this.children=Object.freeze(b||[])}getPropertyDescriptor(a,b){let c;
for(;!(c=Object.getOwnPropertyDescriptor(a,b))&&(a=Reflect.getPrototypeOf(a)););return c}bindDescriptor(a,b){a=this.getPropertyDescriptor(a,b);if(!a)throw Error(`Property '${b}' was not found.`);b=Object.assign({},a);b.value?b.value=b.value.bind(this):(b.get&&(b.get=b.get.bind(this)),b.set&&(b.set=b.set.bind(this)));return b}bindComponentProperties(a,b){const c=Reflect.getPrototypeOf(this);for(const f of b)Reflect.defineProperty(a,f,this.bindDescriptor(c,f))}assignComponentProperties(a,b){for(const c of b)if(c in
a){if(!(c in this))throw Error(`Property '${c}' can't be assigned.`);this[c]=a[c]}}get element(){throw Error("Component not implemented.");}};b([a.Protected()],d.prototype,"properties",void 0);b([a.Protected()],d.prototype,"children",void 0);b([a.Private()],d.prototype,"getPropertyDescriptor",null);b([a.Private()],d.prototype,"bindDescriptor",null);b([a.Protected()],d.prototype,"bindComponentProperties",null);b([a.Protected()],d.prototype,"assignComponentProperties",null);b([a.Public()],d.prototype,
"element",null);d=b([a.Describe()],d);e.Component=d}},"@singleware/ui-control/element":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,b,d,e){var c=arguments.length,f=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,d):e,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,e);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>c?g(f):3<c?g(b,d,f):g(b,d))||f;return 3<c&&f&&Object.defineProperty(b,d,f),f};Object.defineProperty(e,"__esModule",
{value:!0});a=a("@singleware/class");let d=class extends HTMLElement{getChildElement(a,b){const c=a.assignedNodes()[0];if(!c&&b)throw Error(`There are no children in the '${a.name}' slot.`);return c}getRequiredChildElement(a){return this.getChildElement(a,!0)}getChildProperty(a,b,d){return this.getChildElement(a,d)[b]}getRequiredChildProperty(a,b){return this.getChildProperty(a,b,!0)}setChildProperty(a,b,d,e){a=this.getChildElement(a,e);return b in a?(a[b]=d,!0):!1}setRequiredChildProperty(a,b,d){return this.setChildProperty(a,
b,d,!0)}callChildMethod(a,b,d,e){a=this.getChildElement(a,e);if(a[b]instanceof Function)return a[b](...d)}callRequiredChildMethod(a,b,d){return this.callChildMethod(a,b,d,!0)}updatePropertyState(a,b){b?this.setAttribute(a,!0===b?"":b):this.removeAttribute(a)}updateChildrenState(a,b){for(const c of this.children)a in c&&(c[a]=b)}};b([a.Protected()],d.prototype,"getChildElement",null);b([a.Protected()],d.prototype,"getRequiredChildElement",null);b([a.Protected()],d.prototype,"getChildProperty",null);
b([a.Protected()],d.prototype,"getRequiredChildProperty",null);b([a.Protected()],d.prototype,"setChildProperty",null);b([a.Protected()],d.prototype,"setRequiredChildProperty",null);b([a.Protected()],d.prototype,"callChildMethod",null);b([a.Protected()],d.prototype,"callRequiredChildMethod",null);b([a.Protected()],d.prototype,"updatePropertyState",null);b([a.Protected()],d.prototype,"updateChildrenState",null);d=b([a.Describe()],d);e.Element=d}},"@singleware/ui-control/helper":{pack:!1,invoke:function(e,
a){var b=this&&this.__decorate||function(a,b,d,e){var c=arguments.length,f=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,d):e,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,e);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>c?g(f):3<c?g(b,d,f):g(b,d))||f;return 3<c&&f&&Object.defineProperty(b,d,f),f};Object.defineProperty(e,"__esModule",{value:!0});a=a("@singleware/class");let d=class extends a.Null{static listChildrenByType(a,b,d){a=a.assignedNodes();
for(const c of a)if(c instanceof b&&(a=d(c),void 0!==a))return a}static listChildrenByProperty(a,b,d){return this.listChildrenByType(a,HTMLElement,(a)=>{if(b in a&&(a=d(a),void 0!==a))return a})}static getChildByType(a,b){return this.listChildrenByType(a,b,(a)=>a)}static getChildByProperty(a,b){return this.listChildrenByProperty(a,b,(a)=>a)}static getChildProperty(a,b){return(a=this.getChildByProperty(a,b))?a[b]:void 0}static setChildrenProperty(a,b,d){this.listChildrenByProperty(a,b,(a)=>{a[b]=d})}static setChildProperty(a,
b,d){return(a=this.getChildByProperty(a,b))?(a[b]=d,!0):!1}};b([a.Public()],d,"listChildrenByType",null);b([a.Public()],d,"listChildrenByProperty",null);b([a.Public()],d,"getChildByType",null);b([a.Public()],d,"getChildByProperty",null);b([a.Public()],d,"getChildProperty",null);b([a.Public()],d,"setChildrenProperty",null);b([a.Public()],d,"setChildProperty",null);d=b([a.Describe()],d);e.Helper=d}},"@singleware/ui-control/index":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});
var b=a("./element");e.Element=b.Element;b=a("./component");e.Component=b.Component;const d=a("./helper");e.listChildrenByType=(a,b,e)=>d.Helper.listChildrenByType(a,b,e);e.listChildrenByProperty=(a,b,e)=>d.Helper.listChildrenByProperty(a,b,e);e.getChildByType=(a,b)=>d.Helper.getChildByType(a,b);e.getChildByProperty=(a,b)=>d.Helper.getChildByProperty(a,b);e.getChildProperty=(a,b)=>d.Helper.getChildProperty(a,b);e.setChildrenProperty=(a,b,e)=>d.Helper.setChildrenProperty(a,b,e);e.setChildProperty=
(a,b,e)=>d.Helper.setChildProperty(a,b,e)}},"@singleware/ui-control":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"./form/index":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});a=a("./view");e.View=a.View}},"./form":{pack:!0,invoke:function(e,a){Object.assign(e,a("index"))}},"./form/view":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,b,c,d){var f=arguments.length,e=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===
typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])e=(3>f?g(e):3<f?g(b,c,e):g(b,c))||e;return 3<f&&e&&Object.defineProperty(b,c,e),e};Object.defineProperty(e,"__esModule",{value:!0});const d=a("@singleware/class"),c=a("@singleware/jsx");a=a("@singleware/ui-control");a=class extends a.Component{constructor(){super({});this.form=c.create("form",{class:"form",onSubmit:this.submitHandler.bind(this)},c.create("div",{class:"field"},
c.create("label",null,"First name:"),c.create("input",{type:"text"})),c.create("div",{class:"field"},c.create("label",null,"Last name:"),c.create("input",{type:"text"})),c.create("div",{class:"field"},c.create("label",null,"Username:"),c.create("input",{type:"text"})),c.create("div",{class:"field"},c.create("label",null,"Email:"),c.create("input",{type:"text"})),c.create("div",{class:"field"},c.create("label",null,"Phone:"),c.create("input",{type:"text"})),c.create("div",{class:"field"},c.create("label",
null,"Password:"),c.create("input",{type:"text"})),c.create("button",{type:"submit"},"Submit form"));this.skeleton=c.create("div",{class:"panel"},c.create("img",{src:"/images/logo-colorful.png"}),this.form)}submitHandler(a){a.preventDefault();console.log("Form submitted")}get element(){return this.skeleton}};b([d.Private()],a.prototype,"submitHandler",null);b([d.Private()],a.prototype,"form",void 0);b([d.Private()],a.prototype,"skeleton",void 0);b([d.Public()],a.prototype,"element",null);a=b([d.Describe()],
a);e.View=a}},"./main":{pack:!1,invoke:function(e,a){Object.defineProperty(e,"__esModule",{value:!0});const b=a("@singleware/frontend");a=a("./handler");e.application=new b.Main({});e.application.addService(b.Services.Client,{});e.application.addHandler(a.Handler);e.application.start()}},"./handler":{pack:!1,invoke:function(e,a){var b=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===
typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};Object.defineProperty(e,"__esModule",{value:!0});const d=a("@singleware/class"),c=a("@singleware/frontend"),f=a("./form");a=class extends d.Null{async defaultAction(a){a.detail.output.content=new f.View}};b([d.Public(),c.Main.Processor({path:"/"})],a.prototype,"defaultAction",null);a=b([d.Describe()],a);e.Handler=a}}},m=
{};k.baseDirectory=".";k.require=(e)=>{var a=e.substr(0,1);a="/"!==a&&"@"!==a;e=n(a?`${k.baseDirectory}/${e}`:e);if(!m[e]){a:{a=u[e];if(!a)throw Error(`Module "${e}" does not found.`);const d={},c=k.baseDirectory;try{if(a.pack)var b=e;else{{const a=n(e).split("/");b=a.splice(0,a.length-1).join("/")}}k.baseDirectory=b;a.invoke(d,k.require)}catch(f){throw f;}finally{k.baseDirectory=c;b=d;break a}}m[e]=b}return m[e]};window.require||(window.require=k.require)})(Loader||(Loader={}));
